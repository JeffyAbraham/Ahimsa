{"ast":null,"code":"import { useRef } from \"react\";\nimport { signInWithGoogle, createUser, getCurrentUser } from \"../../firebase/firebase.util\";\nimport { auth } from \"../../firebase/firebase.util\"; //Action creators\n\nexport const setCurrentUser = user => ({\n  type: \"SET_CURRENT_USER\",\n  payload: user\n});\nexport const sigOutUser = () => ({\n  type: \"SIGNOUT_USER\"\n});\nexport const setError = () => ({\n  type: \"SET_ERROR\",\n  payload: \"Something might have went wrong , Did you check the Internet connection :(\"\n}); //thunk async functions\n\nexport const signInWithGoogleMail = () => {\n  return dispatch => {\n    signInWithGoogle().then(({\n      user\n    }) => {\n      createUser(user, user.displayName).then(userRef => {\n        userRef.onSnapshot(onSnapshot => {\n          dispatch(setCurrentUser({\n            id: onSnapshot.id,\n            data: { ...onSnapshot.data()\n            }\n          }));\n        });\n      });\n    }).catch(err => {\n      alert(err);\n    });\n  };\n};\nexport const signInWithEmailAndPasword = (email, password) => {\n  return dispatch => {\n    auth.signInWithEmailAndPassword(email, password).then(({\n      user\n    }) => {\n      createUser(user, user.displayName).then(userRef => {\n        userRef.onSnapshot(onSnapshot => {\n          dispatch(setCurrentUser({\n            id: onSnapshot.id,\n            data: { ...onSnapshot.data()\n            }\n          }));\n        });\n      });\n    }).catch(() => {\n      dispatch(setError());\n    });\n  };\n};\nexport const userState = () => {\n  return dispatch => {\n    getCurrentUser().then(userRef => {\n      createUser(userRef, userRef.displayName).then(userRef => {\n        userRef.onSnapshot(onSnapshot => {\n          dispatch(setCurrentUser({\n            id: onSnapshot.id,\n            data: { ...onSnapshot.data()\n            }\n          }));\n        });\n      });\n    }).catch(() => dispatch(setError));\n  };\n};\nexport const signOutUser = () => {\n  return dispatch => {\n    getCurrentUser().then(userRef => {\n      dispatch(setCurrentUser(userRef));\n    }).catch(() => dispatch(setError));\n  };\n};","map":{"version":3,"sources":["C:/Users/exist/Documents/VeganShop/ahimsa/src/redux/user/user-action.js"],"names":["useRef","signInWithGoogle","createUser","getCurrentUser","auth","setCurrentUser","user","type","payload","sigOutUser","setError","signInWithGoogleMail","dispatch","then","displayName","userRef","onSnapshot","id","data","catch","err","alert","signInWithEmailAndPasword","email","password","signInWithEmailAndPassword","userState","signOutUser"],"mappings":"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","sourcesContent":["import { useRef } from \"react\";\r\nimport {\r\n  signInWithGoogle,\r\n  createUser,\r\n  getCurrentUser,\r\n} from \"../../firebase/firebase.util\";\r\nimport { auth } from \"../../firebase/firebase.util\";\r\n\r\n//Action creators\r\nexport const setCurrentUser = (user) => ({\r\n  type: \"SET_CURRENT_USER\",\r\n  payload: user,\r\n});\r\n\r\nexport const sigOutUser = () => ({\r\n  type: \"SIGNOUT_USER\",\r\n});\r\n\r\nexport const setError = () => ({\r\n  type: \"SET_ERROR\",\r\n  payload:\r\n    \"Something might have went wrong , Did you check the Internet connection :(\",\r\n});\r\n\r\n//thunk async functions\r\n\r\nexport const signInWithGoogleMail = () => {\r\n  return (dispatch) => {\r\n    signInWithGoogle()\r\n      .then(({ user }) => {\r\n        createUser(user, user.displayName).then((userRef) => {\r\n          userRef.onSnapshot((onSnapshot) => {\r\n            dispatch(\r\n              setCurrentUser({\r\n                id: onSnapshot.id,\r\n                data: { ...onSnapshot.data() },\r\n              })\r\n            );\r\n          });\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  };\r\n};\r\n\r\nexport const signInWithEmailAndPasword = (email, password) => {\r\n  return (dispatch) => {\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(({ user }) => {\r\n        createUser(user, user.displayName).then((userRef) => {\r\n          userRef.onSnapshot((onSnapshot) => {\r\n            dispatch(\r\n              setCurrentUser({\r\n                id: onSnapshot.id,\r\n                data: { ...onSnapshot.data() },\r\n              })\r\n            );\r\n          });\r\n        });\r\n      })\r\n      .catch(() => {\r\n        dispatch(setError());\r\n      });\r\n  };\r\n};\r\n\r\nexport const userState = () => {\r\n  return (dispatch) => {\r\n    getCurrentUser()\r\n      .then((userRef) => {\r\n        createUser(userRef, userRef.displayName).then((userRef) => {\r\n          userRef.onSnapshot((onSnapshot) => {\r\n            dispatch(\r\n              setCurrentUser({\r\n                id: onSnapshot.id,\r\n                data: { ...onSnapshot.data() },\r\n              })\r\n            );\r\n          });\r\n        });\r\n      })\r\n      .catch(() => dispatch(setError));\r\n  };\r\n};\r\nexport const signOutUser = () => {\r\n  return (dispatch) => {\r\n    getCurrentUser()\r\n      .then((userRef) => {\r\n        dispatch(setCurrentUser(userRef));\r\n      })\r\n      .catch(() => dispatch(setError));\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}